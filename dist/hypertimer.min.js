/**
 * hypertimer.js
 * https://github.com/enmasseio/hypertimer
 *
 * A timer running faster or slower than real-time, and in continuous or
 * discrete time.
 *
 * @version 0.0.1
 * @date    2014-07-14
 *
 * @license
 * Copyright (C) 2014 Almende B.V., http://almende.com
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.hypertimer=e():t.hypertimer=e()}(this,function(){return function(t){function e(r){if(i[r])return i[r].exports;var o=i[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var r=i(1);t.exports=function(t){return new r(t)}},function(t,e,i){function r(t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.rate=1,this.running=!1,this.realTime=null,this.hyperTime=null,this.timeouts=[],this.intervals=[],this.timeout=null,this.config(t),this.setTime(o.nowReal()),this.continue()}var o=i(2),n={TIMEOUT:0,INTERVAL:1,TRIGGER:2};r.prototype.config=function(t){if(t&&"rate"in t){var e=Number(t.rate);if(isNaN(e))throw new TypeError("Rate must be a number");this.hyperTime=this.now(),this.realTime=o.nowReal(),this.rate=e}return this._schedule(),{rate:this.rate}},r.prototype.setTime=function(t){if(t instanceof Date)this.hyperTime=t.valueOf();else{var e=Number(t);if(isNaN(e))throw new TypeError("Time must be a Date or number");this.hyperTime=e}this._schedule()},r.prototype.now=function(){if(this.running){var t=o.nowReal()-this.realTime,e=t*this.rate;return this.hyperTime+e}return this.hyperTime},r.prototype.continue=function(){this.realTime=o.nowReal(),this.running=!0,this._schedule()},r.prototype.pause=function(){this.hyperTime=this.now(),this.realTime=null,this.running=!1,this._schedule()},r.prototype.getTime=function(){return new Date(this.now())},r.prototype.valueOf=r.prototype.getTime,r.prototype.toString=function(){return this.getTime().toString()},r.prototype._addTimeout=function(t){var e=s++;if(t.id=e,this.timeouts.length>0){for(var i=this.timeouts.length-1;i>=0&&this.timeouts[i].time>t.time;)i--;this.timeouts.splice(i+1,0,t)}else this.timeouts.push(t);return this._schedule(),e},r.prototype.setTimeout=function(t,e){var i=this.now()+e;if(isNaN(i))throw new TypeError("Delay must be a number");return this._addTimeout({type:n.TIMEOUT,time:i,callback:t})},r.prototype.setTrigger=function(t,e){var i=Number(e);if(isNaN(i))throw new TypeError("Time must be a Date or number");return this._addTimeout({type:n.TRIGGER,time:i,callback:t})},r.prototype.setInterval=function(){},r.prototype._schedule=function(){function t(){for(;e.timeouts.length>0&&(e.timeouts[0].time<=r||!isFinite(e.timeouts[0].time));){var t=e.timeouts.shift();t.callback()}e._schedule()}var e=this,i=this.timeouts[0];if(this.running&&i){var r=i.time,o=r-this.now(),n=o/this.rate;this.timeout=setTimeout(t,n)}else this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},r.prototype.clearTimeout=function(t){for(var e=0;e<this.timeouts.length;e++)if(this.timeouts[e].id===t){this.timeouts.splice(e,1),this._schedule();break}},r.prototype.clearTrigger=r.prototype.clearTimeout,r.prototype.clearInterval=r.prototype.clearTimeout;var s=0;t.exports=r},function(t,e){e.nowReal="function"==typeof Date.now?function(){return Date.now()}:function(){return(new Date).valueOf()}}])});
//# sourceMappingURL=hypertimer.map