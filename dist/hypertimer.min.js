/**
 * hypertimer.js
 * https://github.com/enmasseio/hypertimer
 *
 * A timer running faster or slower than real-time, and in continuous or
 * discrete time.
 *
 * @version 0.2.0-SNAPSHOT
 * @date    2014-07-16
 *
 * @license
 * Copyright (C) 2014 Almende B.V., http://almende.com
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.hypertimer=t():e.hypertimer=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){function n(e){function t(e){if(l.length>0){for(var t=l.length-1;t>=0&&l[t].time>e.time;)t--;l.splice(t+1,0,e)}else l.push(e)}function r(){function e(){n===u&&(c=s);for(var e=[];l.length>0&&(l[0].time<=s||!isFinite(l[0].time));){i=l[0];try{i.callback()}catch(a){}i.type===o.INTERVAL&&l[0]===i&&e.push(i),l.shift()}for(var f=n===u||n>=0?1:-1,m=0;m<e.length;m++)i=e[m],i.time+=i.interval*f,t(i);r()}var i,f=l[0];if(m&&(clearTimeout(m),m=null),a&&f){var s=f.time,T=s-p.now(),w=n===u?0:T/n;m=setTimeout(e,w)}}var n=1,a=!1,f=null,c=null,l=[],m=null,s=0,p={};return p.config=function(e){if(e&&"rate"in e){var t=e.rate===u?u:Number(e.rate);if(t!==u&&isNaN(t))throw new TypeError('rate must be a number or string "discrete"');c=p.now(),f=i.nowReal(),n=t}return r(),{rate:n}},p.setTime=function(e){if(e instanceof Date)c=e.valueOf();else{var t=Number(e);if(isNaN(t))throw new TypeError("time must be a Date or number");c=t}r()},p.now=function(){if(n===u)return c;if(a){var e=i.nowReal()-f,t=e*n;return c+t}return c},p["continue"]=function(){f=i.nowReal(),a=!0,r()},p.pause=function(){c=p.now(),f=null,a=!1,r()},p.getTime=function(){return new Date(p.now())},p.valueOf=p.getTime,p.toString=function(){return p.getTime().toString()},p.setTimeout=function(e,n){var i=s++,u=p.now()+n;if(isNaN(u))throw new TypeError("delay must be a number");return t({id:i,type:o.TIMEOUT,time:u,callback:e}),r(),i},p.setTrigger=function(e,n){var i=s++,u=Number(n);if(isNaN(u))throw new TypeError("time must be a Date or number");return t({id:i,type:o.TRIGGER,time:u,callback:e}),r(),i},p.setInterval=function(e,n,i){var u=s++,a=Number(n);if(isNaN(a))throw new TypeError("interval must be a number");(0>a||!isFinite(a))&&(a=0);var f;if(void 0!=i){if(f=Number(i),isNaN(f))throw new TypeError("firstTime must be a Date or number")}else f=p.now()+a;return t({id:u,type:o.INTERVAL,time:f,interval:a,callback:e}),r(),u},p.clearTimeout=function(e){for(var t=0;t<l.length;t++)if(l[t].id===e){l.splice(t,1),r();break}},p.clearTrigger=p.clearTimeout,p.clearInterval=p.clearTimeout,p.list=function(){return l.map(function(e){return e.id})},p.clear=function(){l=[],r()},Object.defineProperty(p,"running",{get:function(){return a}}),p.config(e),p.setTime(i.nowReal()),p.continue(),p}var i=r(2),o={TIMEOUT:0,INTERVAL:1,TRIGGER:2},u="discrete";e.exports=n},function(e,t){t.nowReal="function"==typeof Date.now?function(){return Date.now()}:function(){return(new Date).valueOf()}}])});
//# sourceMappingURL=hypertimer.map